<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>대형폐기물 스티커 수수료 자동 계산기 · 정식표 기반</title>
<meta name="description" content="가구류·전기(전자)제품·생활용품·기타 품목 전 항목 수수료표 기반 자동 계산기 — A4 한 장 인쇄 및 링크 공유 지원" />
<style>
:root { --accent:#2952ff; --bg:#f7f7fb; --card:#ffffff; --text:#222; --print-zoom:1; }
* { box-sizing: border-box; }
body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', Arial, sans-serif; color:var(--text); background:var(--bg); }
header { position:sticky; top:0; z-index:10; background: linear-gradient(180deg,#fff 70%, transparent); border-bottom:1px solid #e8e8ee; }
.wrap { max-width:1100px; margin:0 auto; padding:18px 14px; }
h1 { margin:0 0 8px; font-size:22px; }
.tools { display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
.tools > * { background:var(--card); border:1px solid #e7e7ef; border-radius:10px; padding:10px 12px; }
select { border:none; outline:none; font-size:14px; width:220px; }
.btn { border:none; background:var(--accent); color:#fff; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600; }
.btn.subtle { background:#fff; color:#333; border:1px solid #e7e7ef; }
.note { font-size:12px; color:#666; margin-left:auto; }
main .wrap { padding-top:6px; }
table { width:100%; border-collapse: collapse; background:var(--card); border:1px solid #ececf3; border-radius:12px; overflow:hidden; }
thead th { position: static; top:auto; z-index:1; background:#fcfcff; border-bottom:1px solid #ececf3; font-size:13px; padding:10px; }
tbody td { border-bottom:1px solid #f1f1f6; padding:10px; font-size:14px; text-align:center; }
tbody tr:hover { background:#fafaff; }
.left { text-align:left; }
.qtybox { display:inline-flex; align-items:center; gap:6px; white-space:nowrap; }
.qbtn { min-width:28px; height:28px; line-height:26px; border-radius:8px; border:1px solid #dfe3f0; background:#fff; font-weight:700; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; user-select:none; }
.qbtn:active { transform:translateY(1px); }
.qty { min-width:24px; display:inline-block; text-align:center; font-variant-numeric: tabular-nums; }
tfoot td { padding:10px; background:#fafaff; }
.floating-total { position: fixed; left:0; right:0; bottom:0; z-index:20; background:#111827; color:#fff; padding:12px 14px; box-shadow:0 -4px 16px rgba(0,0,0,.12); }
.total-wrap { max-width:1100px; margin:0 auto; display:flex; gap:10px; align-items:center; }
.total-amount { font-size:18px; font-weight:800; margin-right:auto; }
.small { font-size:12px; opacity:.9; }
.hide-on-mobile { display:block; }
@media (max-width:720px){ .hide-on-mobile{ display:none; } } thead th{ top:124px; } }
/* 미리보기 모달 */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:50}
.modal.show{display:flex}
.backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45)}
.sheet{position:relative;max-width:900px;width:92%;max-height:80vh;overflow:auto;background:#fff;border-radius:14px;box-shadow:0 10px 40px rgba(0,0,0,.2);}
.sheet header{position:sticky;top:0;background:#fff;border-bottom:1px solid #eee;padding:12px 16px;display:flex;gap:10px;align-items:center}
.sheet h3{margin:0;font-size:18px}
.sheet .close{margin-left:auto;border:1px solid #e5e7eb;background:#fff;border-radius:8px;padding:6px 10px;cursor:pointer}
.sheet .content{padding:16px}
.sheet table{width:100%;border-collapse:collapse}
.sheet th,.sheet td{border:1px solid #eee;padding:8px;text-align:center}
.sheet tfoot td{background:#fafafa;font-weight:700}
/* 플로팅 미리보기 버튼 */
.fpv-btn{position:fixed;right:16px;bottom:84px;z-index:50;background:#2952ff;color:#fff;border-radius:999px;padding:10px 14px;border:none;box-shadow:0 6px 16px rgba(0,0,0,.15);cursor:pointer;font-weight:700}
/* 임베드 환경에서 thead 겹침 방지 */
:root.embed thead th{ position: static !important; top:auto !important; }
:root.embed thead{ position: static !important; }
/* 분류 점프 하이라이트 */
.jump-flash { animation: flash 1.2s ease-out; }
@keyframes flash { 0%{background:#fff4cc;} 100%{background:transparent;} }
/* ===== 인쇄 전용: 프린트 컨테이너(#__print__) 한 장만 출력 ===== */
@media print{
  @page{ size:A4 portrait; margin:10mm; }
  #___printMeasure{ display:none !important; }
  body > *:not(#__print__){ display:none !important; }
  #__print__{ display:block !important; width:190mm; margin:0 auto; background:#fff; zoom:var(--print-zoom); }
  #__print__ table{ width:100%; border-collapse:collapse; font-size:11px; }
  #__print__ th,#__print__ td{ border:1px solid #ddd; padding:6px 8px; text-align:center; }
  #__print__ table, #__print__ tr, #__print__ td, #__print__ th{ page-break-inside: avoid !important; break-inside: avoid-page !important; }
}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>대형폐기물 스티커 수수료 자동 계산기</h1>
    <div class="tools">
      <div>
        <strong>분류</strong>
        <select id="category">
          <option value="ALL">전체 보기</option>
          <option>가구류</option>
          <option>가전제품류</option>
          <option>기타생활용품</option>
          <option>무상수거제품</option>
        </select>
      </div>
      <button class="btn" id="previewBtn" type="button" title="선택 항목과 합계를 한눈에 보기">미리보기</button>
      <button class="btn subtle" id="clearBtn" type="button" title="모든 수량을 0으로 초기화">수량 초기화</button>
      <span class="note">표 기준 · 지역에 따라 실제 수수료가 다를 수 있습니다.</span>
      <span class="note" id="dbgCount" title="현재 로드된 품목 수"></span>
    </div>
  </div>
</header>
<main>
  <div class="wrap">
    <table>
      <thead>
        <tr>
          <th class="hide-on-mobile">분류</th>
          <th>품목</th>
          <th>규격</th>
          <th>수수료(원)</th>
          <th>수량</th>
          <th>금액</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
    <p class="small">※ 이 계산기는 안내용입니다. 실제 신고·스티커 발급은 해당 지자체 시스템을 이용해 주세요.</p>
  </div>
</main>
<div class="floating-total" id="totalBar">
  <div class="total-wrap">
    <div class="total-amount" id="grandTotal">총 합계: 0 원</div>
  </div>
</div>
<!-- 미리보기 모달 -->
<div class="modal" id="previewModal" aria-hidden="true">
  <div class="backdrop" id="previewBackdrop"></div>
  <div class="sheet">
    <header>
      <h3>대형폐기물 배출 내역 미리보기</h3>
      <button class="close" id="previewClose" type="button">닫기</button>
    </header>
    <div class="content">
      <div id="previewEmpty" style="padding:8px 0;color:#666;">선택한 품목이 없습니다. 표에서 수량을 추가해 주세요.</div>
      <div id="previewBody" style="display:none;">
        <table>
          <thead>
            <tr>
              <th>품목</th>
              <th>규격</th>
              <th>단가(원)</th>
              <th>수량</th>
              <th>금액(원)</th>
            </tr>
          </thead>
          <tbody id="previewTbody"></tbody>
          <tfoot>
            <tr>
              <td colspan="4">총 합계</td>
              <td id="previewTotal">0</td>
            </tr>
          </tfoot>
        </table>
        <div style="margin-top:12px; display:flex; gap:8px;">
          <button class="btn" id="previewPrint" type="button">인쇄</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- 오른쪽 하단 플로팅 미리보기 버튼 -->
<button class="fpv-btn" id="floatingPreviewBtn" type="button" title="선택 내역 미리보기">미리보기</button>
<script>
'use strict';
// ===== 문자 깨짐 방지: 특수기호/전각기호/단위 정규화 =====
function sanitize(txt){
  if(txt==null) return '';
  return String(txt)
    .replace(/[\u2212\uFF0D]/g,'-')   // minus → '-'
    .replace(/[\uFF0B]/g,'+')          // fullwidth plus → '+'
    .replace(/[\u33A5]/g,'m2')         // ㎡ → m2
    .replace(/[\u338F]/g,'kg')         // ㎏ → kg
    .replace(/[\u2113\u33D1]/g,'L')   // ℓ → L
    .replace(/[\u00A0]/g,' ');         // nbsp → space
}

// ===== 데이터: 붙여넣은 추가 품목 원문 =====
const RAW_APPEND = `선택
<가구류>
다리미판	가장긴면90cm미만	1,000

선택
<가구류>
다리미판	가장긴면90cm이상	2,000

선택
<가구류>
전자렌지대	120cm이하	5,000

선택
<가구류>
전자렌지대	180cm이하	7,000

선택
<가구류>
문갑	1m(1m추가시마다3,000원)	3,000

선택
<가구류>
문갑	1m미만	2,000

선택
<가구류>
문짝	목재류	5,000

선택
<가구류>
밥상	80cm이하	2,000

선택
<가구류>
밥상	80cm초과	3,000

선택
<가구류>
밥상	3인이하(차탁자포함)	1,000
<가구류>
소파	1인용기준	4,000

선택
<가구류>
소파	1인용추가시마다	3,000

선택
<가구류>
소파	2인용	7,000

선택
<가구류>
소파	스툴(50cm)	3,000

선택
<가구류>
소파	리클라이너(1인용)(추가시마다)	8,000

선택
<가구류>
식탁(유리,대리석별도)	3인이하	3,000

선택
<가구류>
식탁(유리,대리석별도)	4인	4,000

선택
<가구류>
식탁(유리,대리석별도)	6인이상	6,000

선택
<가구류>
유리(식탁)	m당	2,000

선택
<가구류>
대리석(식탁)	m당	4,000
<가구류>
옷걸이	스탠드형	2,000

선택
<가구류>
의자	장의자,피아노의자	3,000

선택
<가구류>
의자	1인용의자	2,000

선택
<가구류>
의자	바퀴달린의자(일반)	4,000

선택
<가구류>
의자	바퀴달린의자(대형)	5,000

선택
<가구류>
의자	흔들의자,바의자	3,000

선택
<가구류>
의자	유아용식탁의자	3,000

선택
<가구류>
장롱(옷장)	가로120cm이하	18,000

선택
<가구류>
장롱(옷장)	가로90cm이하	13,000

선택
<가구류>
장롱(옷장)	가로60cm이하	10,000
<가구류>
장롱(옷장)	가로틀	1,000

선택
<가구류>
장롱(옷장)	세로틀	2,000

선택
<가구류>
서랍장(유리대리석별도)	1단(긴쪽60cm기준)마다	1,000

선택
<가구류>
유리(서랍장)	m당	2,000

선택
<가구류>
대리석(서랍장)	m당	4,000

선택
<가구류>
신발장	1m미만	2,000

선택
<가구류>
신발장	1m	4,000

선택
<가구류>
신발장	1m초과(m당추가시마다)	2,000

선택
<가구류>
싱크대(유리대리석별도)	1m미만	4,000

선택
<가구류>
싱크대(유리대리석별도)	1m	6,000
<가구류>
싱크대(유리대리석별도)	1m초과(m당추가시마다)	2,000

선택
<가구류>
유리(싱크대)	m당	2,000

선택
<가구류>
대리석(싱크대)	m당	4,000

선택
<가구류>
거실장(TV받침)(유리대리석별도)	1m미만	4,000

선택
<가구류>
거실장(TV받침)(유리대리석별도)	1m(1m추가시마다2,000원)	6,000

선택
<가구류>
거실장(TV받침)(유리대리석별도)	1m초과(m당추가시마다)	2,000

선택
<가구류>
유리(거실장)	m당	2,000

선택
<가구류>
대리석(거실장)	m당	4,000

선택
<가구류>
장식장(유리별도)	1m미만	4,000

선택
<가구류>
장식장(유리별도)	1m(1m추가시마다2,000원)	6,000
<가구류>
장식장(유리별도)	1m초과(m당추가시마다)	2,000

선택
<가구류>
유리(장식장)	m당	2,000

선택
<가구류>
창문(틀포함)	m당	3,000

선택
<가구류>
책상,화장대	m당	3,000

선택
<가구류>
책장(유리별도)	1m미만	4,000

선택
<가구류>
책장(유리별도)	1m(1m추가시마다2,000원)	6,000

선택
<가구류>
책장(유리별도)	1m초과(m당추가시마다)	2,000

선택
<가구류>
유리(책장)	m당	2,000

선택
<가구류>
침대	싱글(침대틀)(수납형추가수수료부과)	6,000

선택
<가구류>
침대	더블(침대틀)(수납형추가수수료부과)	7,000
<가구류>
침대	퀸/킹(침대틀)(수납형추가수수료부과)	8,000

선택
<가구류>
침대(서랍장)	개당	1,000

선택
<가구류>
침대	싱글매트리스	6,000

선택
<가구류>
침대	더블매트리스	9,000

선택
<가구류>
침대	퀸/킹매트리스	10,000

선택
<가구류>
침대	1인용(라텍스매트리스)	7,000

선택
<가구류>
침대	2인용(라텍스매트리스)	11,000

선택
<가구류>
침대	유아용침대	5,000

선택
<가구류>
침대	침대(흙,돌,황토,의료)1인용	26,000

선택
<가구류>
침대	침대(흙,돌,황토,의료)2인용	36,000
<가구류>
침대	2층침대(벙커형)	15,000

선택
<가구류>
침대	2층침대사다리	3,000

선택
<가구류>
침대	접이식침대(1인용)	5,000

선택
<가구류>
침대	접이식침대(2인용)	7,000

선택
<가구류>
침대	소파배드	15,000

선택
<가구류>
침대	모션(전동)매트리스 1인용	15,000

선택
<가구류>
침대	모션(전동)매트리스 2인용	25,000

선택
<가구류>
침대	저상침대(패밀리)	35,000

선택
<가구류>
행거	행거(1m당) 1단	2,000

선택
<가구류>
행거	행거(1m당) 2단이상	3,000
<가전제품류>
TV텔레비젼	25인치미만	3,000

선택
<가전제품류>
TV텔레비젼	25인치이상	5,000

선택
<가전제품류>
TV텔레비젼	42인치이상	7,000

선택
<가전제품류>
가스(오븐)레인지	일반(3구이하)	2,000

선택
<가전제품류>
가스(오븐)레인지	높이1m미만	3,000

선택
<가전제품류>
가스(오븐)레인지	높이1m이상	6,000

선택
<가전제품류>
게임기	50cm미만	3,000

선택
<가전제품류>
게임기	50cm이상	5,000

선택
<가전제품류>
게임기	전문업소용	11,000

선택
<가전제품류>
공기청정기	높이1m미만	3,000
<가전제품류>
공기청정기	높이1m이상	4,000

선택
<가전제품류>
공기청정기	업소용(대형)	10,000

선택
<가전제품류>
김치냉장고(스탠드형냉장고수수료부과)	130L미만	4,000

선택
<가전제품류>
김치냉장고(스탠드형냉장고수수료부과)	130L이상	5,000

선택
<가전제품류>
냉장고	300L미만	6,000

선택
<가전제품류>
냉장고	300L이상	8,000

선택
<가전제품류>
냉장고	500L이상	11,000

선택
<가전제품류>
냉장고	양문형	15,000

선택
<가전제품류>
냉장고	업소용	25,000

선택
<가전제품류>
발마사지기계	발마사지기계	3,000
<가전제품류>
복사기(복합기)	높이1m미만	5,000

선택
<가전제품류>
복사기(복합기)	높이1m이상	10,000

선택
<가전제품류>
선풍기	업소용(스탠드형)	3,000

선택
<가전제품류>
세단기	높이1m이상	5,000

선택
<가전제품류>
세탁기	10kg미만(일반)	5,000

선택
<가전제품류>
세탁기	10kg이상(일반)	6,000

선택
<가전제품류>
세탁기,의류건조기	10kg미만(드럼)	8,000

선택
<가전제품류>
세탁기,의류건조기	10kg이상(드럼)	15,000

선택
<가전제품류>
식기건조기,세척기	긴면 m당	3,000

선택
<가전제품류>
실외기	벽걸이	4,000
<가전제품류>
실외기	천정형,스탠드	6,000

선택
<가전제품류>
실외기	업소용(대형)	10,000

선택
<가전제품류>
안마기	핸드형	2,000

선택
<가전제품류>
안마의자	접이식안마의자	5,000

선택
<가전제품류>
안마의자	대형안마의자	20,000

선택
<가전제품류>
에어컨 온풍기(냉난방기)	벽걸이	4,000

선택
<가전제품류>
에어컨 온풍기(냉난방기)	천정형	7,000

선택
<가전제품류>
에어컨 온풍기(냉난방기)	스탠드	11,000

선택
<가전제품류>
에어컨 온풍기(냉난방기)	업소용(대형)	15,000

선택
<가전제품류>
오디오	본체높이 1m이상	5,000
<가전제품류>
오디오	스피커높이 1m미만	1,000

선택
<가전제품류>
자동판매기	소형,자가	5,000

선택
<가전제품류>
자동판매기	음료,담배등	13,000

선택
<가전제품류>
청소기	개당	3,000

선택
<가전제품류>
컴퓨터	본체	3,000

선택
<가전제품류>
환풍기	업소용(대형)	3,000

선택
<기타생활용품류>
입간판	m당	4,000

선택
<기타생활용품류>
입간판	고무통입간판	5,000

선택
<기타생활용품류>
가방류	50cm미만	1,000

선택
<기타생활용품류>
가방류	20인치이하	2,000
<기타생활용품류>
가방류	20인치초과	3,000

선택
<기타생활용품류>
가방류	골프가방	3,000

선택
<기타생활용품류>
거울(장당)	m당	3,000

선택
<기타생활용품류>
게시판(화이트보드)	길이100cm미만	2,000

선택
<기타생활용품류>
게시판(화이트보드)	길이100cm이상	4,000

선택
<기타생활용품류>
고무통(고무대야)	높이,너비60cm미만	2,000

선택
<기타생활용품류>
고무통(고무대야)	높이,너비60cm이상	4,000

선택
<기타생활용품류>
골프채	개당	500

선택
<기타생활용품류>
금고(가정용)	가장긴면1m미만	10,000

선택
<기타생활용품류>
금고(가정용)	가장긴면1m이상 1.5m미만	20,000
<기타생활용품류>
기름탱크	400L미만	8,000

선택
<기타생활용품류>
기름탱크	400L이상	15,000

선택
<기타생활용품류>
난로	가스,석유,전기등	2,000

선택
<기타생활용품류>
대리석	m당	4,000

선택
<기타생활용품류>
도마	가정용나무도마	1,000

선택
<기타생활용품류>
도마	업소용나무도마	2,000

선택
<기타생활용품류>
마네킹	100cm미만	3,000

선택
<기타생활용품류>
마네킹	100cm이상	5,000

선택
<기타생활용품류>
마네킹	석고마네킹	5,000

선택
<기타생활용품류>
매트(PVC,층간소음)	1m당(추가시마다)	2,000
<기타생활용품류>
목발	의료용	2,000

선택
<기타생활용품류>
목욕탕 수건함(거울별도)	플라스틱 m당	2,000

선택
<기타생활용품류>
목욕탕 수건함(거울별도)	목재류 m당	3,000

선택
<기타생활용품류>
목욕탕 수건함(거울)	m당	3,000

선택
<기타생활용품류>
물탱크	1톤당(추가시마다)	10,000

선택
<기타생활용품류>
바둑판	두께6cm미만	1,000

선택
<기타생활용품류>
바둑판	두께6cm이상	2,000

선택
<기타생활용품류>
배기후드	m당(추가시마다)	2,000

선택
<기타생활용품류>
벽지	3.3㎡당(추가시마다)	2,000

선택
<기타생활용품류>
변기	소변기	5,000
<기타생활용품류>
변기	소변기(대)	8,000

선택
<기타생활용품류>
변기	좌변기	5,000

선택
<기타생활용품류>
변기	양변기	8,000

선택
<기타생활용품류>
병풍	폭당	500

선택
<기타생활용품류>
보일러	대당	8,000

선택
<기타생활용품류>
보행기	모든규격	2,000

선택
<기타생활용품류>
볼링공	개당	2,000

선택
<기타생활용품류>
블라인드	1m당	1,000

선택
<기타생활용품류>
블라인드	1m당(우드)	2,000

선택
<기타생활용품류>
비데	비데	3,000

<기타생활용품류>
빨래건조대	접이식	2,000

선택
<기타생활용품류>
빨래건조대	이동식(바퀴방식)	3,000

선택
<기타생활용품류>
세면대(다리별도)	개당	3,000

선택
<기타생활용품류>
소화기(분말식)	소형(3.3kg이하)	2,000

선택
<기타생활용품류>
소화기(분말식)	중형(3.3kg초과)	3,000

선택
<기타생활용품류>
수도호스	10m당	1,000

선택
<기타생활용품류>
스노보드,스키,스케이트	1세트	2,000

선택
<기타생활용품류>
시계	지름28cm미만	2,000

선택
<기타생활용품류>
시계	높이1m이상	3,000

선택
<기타생활용품류>
쓰레기통	30L미만	1,000
<기타생활용품류>
쓰레기통	30L이상	2,000

선택
<기타생활용품류>
쓰레기통	음식물(가정용)	2,000

선택
<기타생활용품류>
쓰레기통	음식물(대형)	5,000

선택
<기타생활용품류>
아이스박스	30L미만	1,000

선택
<기타생활용품류>
아이스박스	30L이상	2,000

선택
<기타생활용품류>
아이스박스	50L이상	3,000

선택
<기타생활용품류>
액자(유리별도)	50cm이하	1,000

선택
<기타생활용품류>
액자(유리별도)	1m이하	1,500

선택
<기타생활용품류>
어항(수족관)	가정용 m당	4,000

선택
<기타생활용품류>
어항(수족관)	업소용 m당	10,000
<기타생활용품류>
온수기	높이 1m이상	2,000

선택
<기타생활용품류>
욕조(플라스틱)	유아용	3,000

선택
<기타생활용품류>
욕조(플라스틱)	일반용	5,000

선택
<기타생활용품류>
우산	접이식	500

선택
<기타생활용품류>
우산	장우산	1,000

선택
<기타생활용품류>
운동기구	스탭퍼	3,000

선택
<기타생활용품류>
운동기구	헬스자전거(접이식)	6,000

선택
<기타생활용품류>
운동기구	기타5kg이하	3,000

선택
<기타생활용품류>
운동기구	기타10kg이하	7,000

선택
<기타생활용품류>
운동기구	런닝머신(수동)	10,000
<기타생활용품류>
유리(장당)	m당	2,000

선택
<기타생활용품류>
유모차	휴대용	2,000

선택
<기타생활용품류>
유모차	디럭스,쌍둥이,노인용	3,000

선택
<기타생활용품류>
이불,대형쿠션	모든규격(추가시마다)	2,000

선택
<기타생활용품류>
자전거	유아용(2륜~3륜)	2,000

선택
<기타생활용품류>
자전거	성인용, 아동용(2발)	3,000

선택
<기타생활용품류>
장난감류	소형50cm미만	1,000

선택
<기타생활용품류>
장난감류	소형50cm이상	2,000

선택
<기타생활용품류>
장난감류	대형높이90cm미만	5,000

선택
<기타생활용품류>
장난감류	대형높이90cm이상	7,000
<기타생활용품류>
장난감류	유아용주방놀이 전동자동차	3,000

선택
<기타생활용품류>
장난감류	유아용카시트	3,000

선택
<기타생활용품류>
장판	옥/자석/온수 1인용	5,000

선택
<기타생활용품류>
장판	옥/자석/온수 2인용	8,000

선택
<기타생활용품류>
전기장판	전기장판(1인용)	4,000

선택
<기타생활용품류>
전기장판	전기장판(2인용)	7,000

선택
<기타생활용품류>
카펫,돗자리	3.3㎡당	4,000

선택
<기타생활용품류>
재봉틀	모든규격	5,000

선택
<기타생활용품류>
전기판넬(바닥판넬)	m당	5,000

선택
<기타생활용품류>
정수기	높이1m이상	5,000
<기타생활용품류>
제기함(제기포함)	1세트	5,000

선택
<기타생활용품류>
조명기구	샹들리에	3,000

선택
<기타생활용품류>
조명기구	플라스틱전등50cm이하	3,000

선택
<기타생활용품류>
조명기구	플라스틱전등1m이하	4,000

선택
<기타생활용품류>
조명기구	유리전등50cm이하	5,000

선택
<기타생활용품류>
조명기구	유리전등1m이하	6,000

선택
<기타생활용품류>
천막	가로+세로 1m당	1,000

선택
<기타생활용품류>
캣타워	높이60cm미만	3,000

선택
<기타생활용품류>
캣타워	높이150cm미만	5,000

선택
<기타생활용품류>
커튼봉	1m당	1,000
<<<2122232425>>>
<기타생활용품류>
킥보드(수동)	대당	2,000

선택
<기타생활용품류>
텐트(일반)	4인용미만	3,000

선택
<기타생활용품류>
텐트(일반)	6인용미만	4,000

선택
<기타생활용품류>
파라솔	모든규격	2,000

선택
<기타생활용품류>
파레트	m당(목재,플라스틱)	4,000

선택
<기타생활용품류>
피아노	디지털	10,000

선택
<기타생활용품류>
피아노	일반	20,000

선택
<기타생활용품류>
피아노	그랜드	30,000

선택
<기타생활용품류>
항아리	긴쪽50cm미만	2,000

선택
<기타생활용품류>
항아리	긴쪽50cm이상	3,000
<기타생활용품류>
항아리	긴쪽100cm이상	5,000

선택
<기타생활용품류>
화분	긴쪽50cm미만	1,000

선택
<기타생활용품류>
화분	긴쪽50cm이상	2,000

선택
<기타생활용품류>
화환	3단	5,000

선택
<기타생활용품류>
휠체어	수동	3,000

선택
<기타생활용품류>
휠체어	전동	10,000

선택
<기타생활용품류>
파티션	나무m당	3,000

선택
<기타생활용품류>
파티션	철재m당	4,000

선택
<기타생활용품류>
파티션	유리m당	5,000

선택
<기타생활용품류>
태양광 폐패널	20㎏ 마다	7,000`;

// ===== 파서 =====
const ITEMS = [];
function normalizeCategory(raw){
  if(!raw) return '기타생활용품';
  if(raw.includes('가구')) return '가구류';
  if(raw.includes('가전')) return '가전제품류';
  if(raw.includes('무상')) return '무상수거제품';
  if(raw.includes('기타생활용품')) return '기타생활용품';
  return raw.replace(/류$/,'');
}
function parseAndMerge(raw){
  const lines = raw.split(/\r?\n/).map(s=>s.trim()).filter(s=>s.length>0);
  let cat=null; const parsed=[];
  for(let i=0;i<lines.length;i++){
    const line=lines[i];
    if(line==='선택' || /^<<</.test(line)) continue;
    const mCat=line.match(/^<([^>]+)>$/);
    if(mCat){ cat=normalizeCategory(mCat[1]); continue; }
    let name, rule, priceStr;
    if(line.includes('\t')){
      const parts=line.split('\t');
      if(parts.length>=3){ name=parts[0]; rule=parts.slice(1,-1).join(' ').trim(); priceStr=parts[parts.length-1]; }
    } else {
      const m=line.match(/^(.+?)\s+(.+?)\s+([\d,]+)\s*$/);
      if(m){ name=m[1]; rule=m[2]; priceStr=m[3]; }
    }
    if(!name||!rule||!priceStr||!cat) continue;
    const price=parseInt(String(priceStr).replace(/[^\d]/g,'')||'0',10);
    parsed.push([cat,sanitize(name),sanitize(rule),price]);
  }
  const seen=new Set(ITEMS.map(([c,n,r,p])=>`${c}|${n}|${r}|${p}`));
  parsed.forEach(row=>{ const key=`${row[0]}|${row[1]}|${row[2]}|${row[3]}`; if(!seen.has(key)){ ITEMS.push(row); seen.add(key);} });
}
parseAndMerge(RAW_APPEND);

// ===== 유틸 =====
const $ = (sel)=>document.querySelector(sel);
const state = { qty: {} };
let catFirstRow = {};
function decodeSelParam(v){ try{ let s=decodeURIComponent(v); try{s=decodeURIComponent(s);}catch(e){} const obj=JSON.parse(s); return (obj&&typeof obj==='object')?obj:{}; }catch(e){ return {}; } }
function canUseHistoryReplace(){ const protocolOK=/^https?:$/.test(location.protocol); const hasAPI=!!(window.history&&history.replaceState); const isSrcdoc=location.href.startsWith('about:')||location.href.includes('srcdoc'); const originNull=(location.origin==='null'); return protocolOK&&hasAPI&&!isSrcdoc&&!originNull; }
function buildShareQS(){ const params=new URLSearchParams(); const slim={}; for(const [k,v] of Object.entries(state.qty)) if(v>0) slim[k]=v; if(Object.keys(slim).length){ const json=JSON.stringify(slim); const doubleEncoded=encodeURIComponent(encodeURIComponent(json)); params.set('sel', doubleEncoded); } return params.toString()?('?'+params.toString()):''; }
function money(n){ return Number(n||0).toLocaleString('ko-KR'); }

// ===== 렌더 =====
function render(){
  const tbody=document.getElementById('tbody'); if(!tbody) return;
  tbody.innerHTML=''; catFirstRow={};
  const frag=document.createDocumentFragment();
  ITEMS.forEach((it, idx)=>{
    const [cat,name,rule,price]=it; const key=String(idx); const qty=state.qty[key]||0;
    const tr=document.createElement('tr'); tr.dataset.cat=cat; if(!(cat in catFirstRow)) catFirstRow[cat]=tr;
    tr.innerHTML=`
      <td class="hide-on-mobile">${sanitize(cat)}</td>
      <td class="left">${sanitize(name)}</td>
      <td>${sanitize(rule||'-')}</td>
      <td>${money(price)}</td>
      <td>
        <div class="qtybox">
          <span class="qbtn" data-k="${key}" data-d="-1" role="button" aria-label="감소" tabindex="0">-</span>
          <span class="qty" id="q_${key}">${qty}</span>
          <span class="qbtn" data-k="${key}" data-d="1" role="button" aria-label="증가" tabindex="0">+</span>
        </div>
      </td>
      <td id="amt_${key}">${money(price*qty)}</td>`;
    frag.appendChild(tr);
  });
  tbody.appendChild(frag);
  const dbg=document.getElementById('dbgCount'); if(dbg){ dbg.textContent = `품목 ${ITEMS.length}개`; }
  updateTotal();
}

function updateTotal(){
  let total=0; for(const [key,qty] of Object.entries(state.qty)){ const price=ITEMS[+key][3]; total+=price*qty; const amt=$('#amt_'+key); const qsp=$('#q_'+key); if(amt) amt.textContent=money(price*qty); if(qsp) qsp.textContent=qty; }
  $('#grandTotal').textContent='총 합계: '+money(total)+' 원';
  const qs=buildShareQS(); window._shareQS=qs;
  if(canUseHistoryReplace()){ try{ history.replaceState(null,'', location.pathname+qs+location.hash); }catch(e){} }
  try{ localStorage.setItem('bulky_fee_qty', JSON.stringify(state.qty)); }catch(e){}
}

function handleDelta(target){ const btn=target.closest?target.closest('.qbtn'):target; if(!btn||!btn.classList||!btn.classList.contains('qbtn')) return; const k=btn.getAttribute('data-k'); let d=parseInt(btn.getAttribute('data-d'),10); if(isNaN(d)){ const t=(btn.textContent||'').trim(); d=(t==='+'||t==='+')?1:-1; } const cur=state.qty[k]||0; state.qty[k]=Math.max(0, cur+d); updateTotal(); }

function openPreview(){ const modal=$('#previewModal'); const body=$('#previewBody'); const empty=$('#previewEmpty'); const tbodyP=$('#previewTbody'); const totalP=$('#previewTotal'); if(!modal){ alert('미리보기 모달을 찾을 수 없습니다.'); return; } tbodyP.innerHTML=''; let any=false,total=0; Object.entries(state.qty).forEach(([k,qty])=>{ if(qty<=0) return; any=true; const [cat,name,rule,price]=ITEMS[+k]||['','항목','- ',0]; const amt=(price||0)*qty; const tr=document.createElement('tr'); tr.innerHTML=`<td>${sanitize(name)}</td><td>${sanitize(rule||'-')}</td><td>${money(price||0)}</td><td>${qty}</td><td>${money(amt)}</td>`; tbodyP.appendChild(tr); total+=amt; }); totalP.textContent=money(total); empty.style.display=any?'none':'block'; body.style.display=any?'block':'none'; modal.setAttribute('aria-hidden','false'); modal.classList.add('show'); }

function printPreviewOnePage(){
  const prev=document.getElementById('__print__'); if(prev) try{ prev.remove(); }catch(e){}
  const modalSheet=document.querySelector('#previewModal .sheet'); const previewTable=document.querySelector('#previewModal .sheet table'); if(!modalSheet||!previewTable){ window.print(); return; }
  const printablePx=(function mmToPx(mm){ const t=document.createElement('div'); t.style.width='1mm'; t.style.position='absolute'; t.style.left='-99999px'; document.body.appendChild(t); const px=t.getBoundingClientRect().width; t.remove(); return mm*px; })(297-20);
  let meas=document.createElement('div'); meas.id='___printMeasure'; meas.style.cssText='position:absolute;left:-10000px;top:0;'; const probe=modalSheet.cloneNode(true); Object.assign(probe.style,{ width:'190mm', maxHeight:'none', boxShadow:'none', border:'none' }); meas.appendChild(probe); document.body.appendChild(meas); const contentPx=probe.getBoundingClientRect().height; meas.remove();
  const zoom=Math.max(0.6, Math.min(0.98, printablePx/Math.max(1, contentPx))); document.documentElement.style.setProperty('--print-zoom', String(zoom));
  const host=document.createElement('div'); host.id='__print__'; const title=document.createElement('h3'); title.textContent='대형폐기물 배출 내역'; title.style.cssText='margin:0 0 8px;font-size:14px;text-align:center;'; const tableClone=previewTable.cloneNode(true); host.appendChild(title); host.appendChild(tableClone); document.body.appendChild(host);
  const cleanup=()=>{ try{ document.documentElement.style.setProperty('--print-zoom','1'); }catch(e){} try{ host.remove(); }catch(e){} };
  const mql=window.matchMedia('print'); const onChange=(e)=>{ if(!e.matches){ cleanup(); mql.removeEventListener('change', onChange); } }; try{ mql.addEventListener('change', onChange); }catch(e){}
  window.addEventListener('afterprint', cleanup, { once:true }); setTimeout(()=>{ cleanup(); try{ mql.removeEventListener('change', onChange); }catch(e){} }, 5000);
  setTimeout(()=>window.print(), 20);
}

function init(){
  if(window.self!==window.top){ document.documentElement.classList.add('embed'); }
  document.getElementById('tbody').addEventListener('click', (e)=>handleDelta(e.target));
  document.getElementById('tbody').addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ handleDelta(e.target); e.preventDefault(); } });
  document.getElementById('previewBtn').addEventListener('click', openPreview);
  document.getElementById('floatingPreviewBtn').addEventListener('click', openPreview);
  document.getElementById('previewClose').addEventListener('click', ()=> document.getElementById('previewModal').classList.remove('show'));
  document.getElementById('previewBackdrop').addEventListener('click', ()=> document.getElementById('previewModal').classList.remove('show'));
  document.getElementById('previewPrint').addEventListener('click', printPreviewOnePage);
  document.getElementById('clearBtn').addEventListener('click', ()=>{ state.qty={}; try{ localStorage.removeItem('bulky_fee_qty'); }catch(e){} updateTotal(); render(); });
  document.getElementById('category').addEventListener('change', (e)=>{ const v=e.target.value; if(v==='ALL'){ window.scrollTo({top:0, behavior:'smooth'}); return; } const row=catFirstRow[v]; if(row){ row.classList.remove('jump-flash'); void row.offsetWidth; row.classList.add('jump-flash'); row.scrollIntoView({behavior:'smooth', block:'center'}); } });
  try{ const url=new URL(location.href); const sel=url.searchParams.get('sel'); if(sel){ const q=decodeSelParam(sel); for(const k in q){ const n=parseInt(q[k],10); if(!Number.isNaN(n)&&n>0) state.qty[k]=n; } } }catch(e){}
  try{ const saved=JSON.parse(localStorage.getItem('bulky_fee_qty')||'{}'); if(saved && typeof saved==='object'){ for(const k in saved){ if(state.qty[k]==null||state.qty[k]===0){ const n=parseInt(saved[k],10); if(!Number.isNaN(n)&&n>0) state.qty[k]=n; } } } }catch(e){}
  render();
}
if(document.readyState==='loading') document.addEventListener('DOMContentLoaded', init); else init();
</script>
</body>
</html>
